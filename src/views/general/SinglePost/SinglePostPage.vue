<template class="singlepost">
  <span>
    <div class="post_wrapper">
      <div class="container">
        <div class="row">
          <div class="col-12 col-sm-8 col-md-8 col-lg-8">
            <div class="" ref="postContent">
              <a class="img_fetch">
                <img src="@/assets/photo4.jpg" alt class="img-responsive">
              </a>
              <div class="content_card_wrapper">
                <p class="mb-3">
                  <span class="border p-1 rounded text-primary">Category</span>
                </p>
                <h1>Lorem ipsum dolor sit amet, vel accumsan iberaviss ex, ea nec elaboraret interpret</h1>
                <div class="user_details">
                  <div class="media">
                    <img
                      src="@/assets/photo4.jpg"
                      class="img-responsive mr-3 rounded-circle align-self-center"
                    >
                    <div class="media-body">
                      <h5 class="d-flex justify-content-start align-items-center">
                        <span class="mt-0 font-weight-bold">John Doe</span>
                        <i class="fas fa-circle text-primary dot mx-2"></i>
                        <small>1 min Ago</small>
                      </h5>
                    </div>
                  </div>
                </div>
                <div class="keypoint_reg">
                  <p>
                    <b>Keypoint</b>
                  </p>
                  <ul>
                    <li>Lorem ipsum dolor sit amet, vel accumsan iberaviss ex, ea nec elaboraret interpret</li>
                    <li>Lorem ipsum dolor sit amet, vel accumsan iberaviss ex, ea nec elaboraret interpret</li>
                    <li>Lorem ipsum dolor sit amet, vel accumsan iberaviss ex, ea nec elaboraret interpret</li>
                  </ul>
                </div>
                <div class="story_point">
                  <p>Lorem ipsum dolor sit amet, vel accumsan liberavisse ex, ea nec elaboraret interpretaris, sed diceret concludaturque no. Verear habemus sea ut. His nibh scripta in. In sea vocibus facilisis. Sed ea cibo eripuit vituperata, pri eius debitis ne. Eos et wisi legimus, vel cu paulo doctus vidisse. Iudico dicant nostrum nec an, in eos harum vitae, te quod vero salutandi nam. In detraxit eleifend duo, alterum iudicabit consectetuer per ad. Qui case possit omittam an, everti expetenda ut usu. Pro discere graecis liberavisse in. Ne docendi corpora quaestio eum, has vivendo suavitate accommodare an. Mei commune detraxit intellegebat ea, duo malis mundi abhorreant ei, cu mentitum recusabo elaboraret eos. Debitis temporibus sit an, eam at alterum efficiantur philosophia. Sea laoreet contentiones id, inermis partiendo vix ut, sea no graeco forensibus posidonium. Id pri error simul, ius illud falli meliore eu. Invenire forensibus est cu, diam ocurreret eu nam. Ne cum iriure accumsan oportere, laudem mandamus no duo. Vis at bonorum delenit appellantur, ne has oratio placerat posidonium, vix labores urbanitas interpretaris an. Nobis blandit adolescens eam ex. Doctus tamquam quaerendum sit ne. Ornatus repudiare pri ad, an ipsum animal vivendum eos. Duo ne mundi malorum, et falli tempor posidonium qui, est paulo scripta interpretaris ex.</p>
                  <img src="@/assets/signin-image.jpg" alt class="img-responsive">
                  <p>Lorem ipsum dolor sit amet, vel accumsan liberavisse ex, ea nec elaboraret interpretaris, sed diceret concludaturque no. Verear habemus sea ut. His nibh scripta in. In sea vocibus facilisis. Sed ea cibo eripuit vituperata, pri eius debitis ne. Eos et wisi legimus, vel cu paulo doctus vidisse. Iudico dicant nostrum nec an, in eos harum vitae, te quod vero salutandi nam. In detraxit eleifend duo, alterum iudicabit consectetuer per ad. Qui case possit omittam an, everti expetenda ut usu. Pro discere graecis liberavisse in. Ne docendi corpora quaestio eum, has vivendo suavitate accommodare an. Mei commune detraxit intellegebat ea, duo malis mundi abhorreant ei, cu mentitum recusabo elaboraret eos. Debitis temporibus sit an, eam at alterum efficiantur philosophia. Sea laoreet contentiones id, inermis partiendo vix ut, sea no graeco forensibus posidonium. Id pri error simul, ius illud falli meliore eu. Invenire forensibus est cu, diam ocurreret eu nam. Ne cum iriure accumsan oportere, laudem mandamus no duo. Vis at bonorum delenit appellantur, ne has oratio placerat posidonium, vix labores urbanitas interpretaris an. Nobis blandit adolescens eam ex. Doctus tamquam quaerendum sit ne. Ornatus repudiare pri ad, an ipsum animal vivendum eos. Duo ne mundi malorum, et falli tempor posidonium qui, est paulo scripta interpretaris ex.</p>
                  <img src="@/assets/signin.jpg" alt class="img-responsive">
                  <p>Lorem ipsum dolor sit amet, vel accumsan liberavisse ex, ea nec elaboraret interpretaris, sed diceret concludaturque no. Verear habemus sea ut. His nibh scripta in. In sea vocibus facilisis. Sed ea cibo eripuit vituperata, pri eius debitis ne. Eos et wisi legimus, vel cu paulo doctus vidisse. Iudico dicant nostrum nec an, in eos harum vitae, te quod vero salutandi nam. In detraxit eleifend duo, alterum iudicabit consectetuer per ad. Qui case possit omittam an, everti expetenda ut usu. Pro discere graecis liberavisse in. Ne docendi corpora quaestio eum, has vivendo suavitate accommodare an. Mei commune detraxit intellegebat ea, duo malis mundi abhorreant ei, cu mentitum recusabo</p>
                  <div class="more_imgs">
                    <p>
                      <b>More Images</b>
                    </p>
                    <div class="row m-0">
                      <div class="col-6 col-sm-3 col-md-3 col-lg-3">
                        <img src="@/assets/signin.jpg" alt class="img-responsive">
                      </div>
                      <div class="col-6 col-sm-3 col-md-3 col-lg-3">
                        <img src="@/assets/signin.jpg" alt class="img-responsive">
                      </div>
                      <div class="col-6 col-sm-3 col-md-3 col-lg-3">
                        <img src="@/assets/signin.jpg" alt class="img-responsive">
                      </div>
                      <div class="col-6 col-sm-3 col-md-3 col-lg-3 extra-images">
                        <img src="@/assets/signin.jpg" alt class="img-responsive">
                        <span class="extra-images__number text-white">+45</span>
                      </div>
                    </div>
                  </div>
                </div>            
            <!-- article action footer -->
            <footer class="footer-action" id="footer-action">
              <div class="">
                <div class="col-sm-6">
                  <div class="d-flex footer-content">
                    <div class="left-action d-flex">
                    <div class="thumbs-up centerEle mr-3" @click="toggleLike()" v-show="!likePost">
                      <div
                        class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary m-2"
                      >
                        <i class="fal fa-thumbs-up fa-1x"></i>
                      </div>
                      <span class="count">18</span>
                    </div>
                    <div class="thumbs-up centerEle mr-3" @click="toggleLike()" v-show="likePost">
                      <div
                        class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary m-2"
                      >
                        <i class="fas fa-thumbs-up fa-1x"></i>
                      </div>
                      <span class="count">18</span>
                    </div>
                    <div
                      class="thumbs-down centerEle"
                      @click="toggleDislike()"
                      v-show="!dislikePost"
                    >
                      <div
                        class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary m-2"
                      >
                        <i class="fal fa-thumbs-down fa-1x"></i>
                      </div>
                      <span class="count">4</span>
                    </div>
                    <div
                      class="thumbs-down centerEle"
                      @click="toggleDislike()"
                      v-show="dislikePost"
                    >
                      <div
                        class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary m-2"
                      >
                        <i class="fas fa-thumbs-down fa-1x"></i>
                      </div>
                      <span class="count">4</span>
                    </div>
                    <div class="thumbs-down centerEle border-left ml-4">
                      <div
                        class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary m-2 ml-4"
                      >
                        <i class="fal fa-reply"></i>
                      </div>
                      <span class="count">11</span>
                    </div>
                    </div>
                    <div class="right-action centerEle">
                    <div
                        class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary m-2"
                      >
                        <i class="fal fa-bookmark fa-1x"></i>
                    </div>
                    <div class="ellipsis">
                      <span
                        class="nav-link dropdown-toggle"
                        href="#"
                        id="navbarDropdown"
                        role="button"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                        @click="positionDropdownArrow"
                      >
                        <i class="fal fa-ellipsis-h"></i>
                      </span>
                      <div
                        :class="['dropdown-menu', 'bl-dropdown-menu', { 'top-dropdown': !dropdownArrowDown , 'bottom-dropdown': dropdownArrowDown }]"
                        aria-labelledby="dropdownMenuReference"
                        ref="dropdown"
                      >
                        <div class="d-flex bl-dropdown-menu__countries">
                          <div class="favourite-countries">
                            <p class="dropdown-item country">Report Post</p>
                            <hr>
                            <hr>
                            <p class="dropdown-item country pt-3" v-show="isConsumer">
                              <i class="fal fa-times"></i>
                              <span class="count">Remove</span>
                            </p>
                            <p class="dropdown-item country">
                              <i class="fal fa-plus"></i>
                              <span class="count ml-2">Creators Profile</span>
                            </p>
                            <p class="dropdown-item country">
                              <i class="fal fa-comment-dots"></i>
                              <span class="count">
                                Comment
                                <span class="badges">5</span>
                              </span>
                            </p>
                            <p class="dropdown-item country hidden-lg-down pb-3">
                              <i class="fal fa-share"></i>
                              <span class="count">
                                Share
                                <span class="badges">5</span>
                              </span>
                            </p>
                            <p
                              class="dropdown-item country toggle-bookmark"
                              v-show="!addBookmark && !isConsumer"
                              @click="toggleBookmark()"
                            >
                              <i class="fal fa-bookmark"></i>
                              <span class="count ml-2">Read Later</span>
                            </p>
                            <p
                              class="dropdown-item country toggle-bookmark"
                              v-show="addBookmark && !isConsumer"
                              @click="toggleBookmark()"
                            >
                              <i class="fas fa-bookmark"></i>
                              <span class="count ml-2">Read Later</span>
                            </p>
                            <hr>
                            <hr>
                            <p
                              class="dropdown-item country toggle-story"
                              v-show="!readStory"
                              @click="toggleReadStory()"
                            >
                              <i class="fal fa-book-open"></i>
                              <span class="count ml-1">Read Story</span>
                            </p>
                            <p
                              class="dropdown-item country toggle-story"
                              v-show="readStory"
                              @click="toggleReadStory()"
                            >
                              <i class="fas fa-book-open"></i>
                              <span class="count ml-1">Read Story</span>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </footer>

              </div>
            </div>

            <br>
            <div class="about_content--creator">
              <p>
                <span style="font-weight: 600">The Content Creator</span>
              </p>
              <br>
              <div class="media">
                <img
                  src="@/assets/photo4.jpg"
                  class="img-responsive mr-3 rounded-circle large-avatar mt-2"
                >
                <div class="media-body">
                  <div class="row">
                    <div class="col-12 col-sm-9 col-md-9 col-lg-9">
                      <h5 class="mt-0">
                        <b>John Doe</b>
                      </h5>
                      <p>Lorem ipsum dolor sit amet, vel accumsan liberavisse ex, ea nec elaboraret interpretaris, sed diceret concludatque no. Verear habemus nibh scripta in.</p>
                    </div>
                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 d-flex justify-content-end">
                      <p>
                        <button class="btn btn-primary">Follow</button>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="comment_content--creator">
              <p class="mb-2">
                <span style="font-weight: 600">
                  Comments
                  <span class="bg-primary text-white p-1 rounded no-comment ml-2">64</span>
                </span>
              </p>
              <div class="comment d-flex justify-content-start align-items-center my-4" @click="toggleAddComment" v-if="!addComment">
                <div class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary">
                  <i class="fal fa-comment-plus comment__icon"></i>
                </div>
                <span class="comment__text text-primary ml-3">Add a comment</span>
              </div>
              <div class="comment-box my-5" v-show="addComment">
                <textarea name="comment" id="commentTextarea" rows="4" placeholder="Add a comment" v-model="textareaValue"></textarea>
                <div class="comment-box__footer p-3">
                  <span class="comment-box__text">Send your comment by choosing how you feel about this article</span>
                  <div class="comment-box__emoji-section d-flex justify-content-around">
                    <span class="comment-box__emoji " v-for="emoji in emojiData" :key="emoji" @click="addEmoji(emoji)">
                     {{String.fromCodePoint(`0x${emoji}`)}}
                    </span>
                  </div>
                </div>

              </div>
              <div class="media">
                <img
                  src="@/assets/signin-image.jpg"
                  alt
                  class="img-responsive mr-3 rounded-circle medium-avatar"
                >
                <div class="media-body">
                  <div class="row">
                    <div class="col-md-10">
                      <h5 class="d-flex justify-content-start align-items-center">
                        <span class="mt-0 font-weight-bold">John Doe</span>
                        <i class="fas fa-circle text-primary dot mx-2"></i>
                        <small>1 min Ago</small>
                      </h5>
                      <p>Lorem ipsum dolor sit amet.</p>
                      <div class="d-flex justify-content-start align-items-center mt-2">
                        <div
                          class="border rounded-circle icon-circle icon-circle__active d-flex justify-content-center align-items-center text-primary"
                        >
                          <i class="fas fa-thumbs-up fa-1x"></i>
                        </div>
                        <span class="ml-2 mr-3">18</span>
                        <div
                          class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary"
                        >
                          <i class="fal fa-thumbs-down"></i>
                        </div>
                        <span class="ml-2">4</span>
                      </div>
                    </div>
                    <div class="col-md-2 d-flex justify-content-end">
                      <span class="comment-box__emoji">&#x1F609;</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="media">
                <img
                  src="@/assets/signin-image.jpg"
                  alt
                  class="img-responsive mr-3 rounded-circle medium-avatar"
                >
                <div class="media-body">
                  <div class="row">
                    <div class="col-md-10">
                      <h5 class="d-flex justify-content-start align-items-center">
                        <span class="mt-0 font-weight-bold">John Doe</span>
                        <i class="fas fa-circle text-primary dot mx-2"></i>
                        <small>1 min Ago</small>
                      </h5>
                      <p>Lorem ipsum dolor sit amet, vel accumsan liberavisse ex, ea nec elaboraret interpretaris, sed diceret concludatque no. Verear habemus nibh scripta in.</p>
                      <div class="d-flex justify-content-start align-items-center mt-2">
                        <div
                          class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary"
                        >
                          <i class="fal fa-thumbs-up fa-1x"></i>
                        </div>
                        <span class="ml-2 mr-3">18</span>
                        <div
                          class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary"
                        >
                          <i class="fal fa-thumbs-down"></i>
                        </div>
                        <span class="ml-2">4</span>
                      </div>
                    </div>
                    <div class="col-md-2 d-flex justify-content-end">
                       <span class="comment-box__emoji">&#x1F60A;</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="media">
                <img
                  src="@/assets/signin-image.jpg"
                  alt
                  class="img-responsive mr-3 rounded-circle medium-avatar"
                >
                <div class="media-body">
                  <h5 class="d-flex justify-content-start align-items-center">
                    <span class="mt-0 font-weight-bold">John Doe</span>
                    <i class="fas fa-circle text-primary dot mx-2"></i>
                    <small>1 min Ago</small>
                  </h5>
                  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi alias, labore expedita amet suscipit officia. Aliquam fugiat, ea in dolorem minima, suscipit atque quia placeat voluptatem quasi, esse architecto numquam corrupti. Eos possimus, inventore a iste incidunt sapiente eum rerum.</p>
                  <div class="d-flex justify-content-start align-items-center mt-2">
                    <div
                      class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary"
                    >
                      <i class="fal fa-thumbs-up fa-1x"></i>
                    </div>
                    <span class="ml-2 mr-3">18</span>
                    <div
                      class="border rounded-circle icon-circle d-flex justify-content-center align-items-center text-primary"
                    >
                      <i class="fal fa-thumbs-down"></i>
                    </div>
                    <span class="ml-2">4</span>
                  </div>
                </div>
              </div>
              <p class="text-center">
                <button class="btn btn-primary">More Comments</button>
              </p>
            </div>
          </div>

          <div class="col-12 col-sm-4 col-md-4 col-lg-4 related__articles">
            <div class="card contest-advert">
              <div class="card-img-overlay">
                <h3 class="card-title font-weight-bold">
                  Become a Content Creator
                </h3>
                <p class="card-text font-weight-bold caption">
                  Publish your article to the world
                </p>
                <span class="d-flex justify-content-start mb-0">
                  <a role="button" href="#" class="btn know-more-btn">
                    Apply
                  </a>
                </span>
                <div class="robot-image"></div>
              </div>
           </div>
          </div>
        </div>
        <div class="row mt-5">
          <div class="col-12">
            <div class="pb-2">
              <h6 class="font-weight-bold pb-1">Related Articles</h6>
              <p class="subtitle">Lorem ipsum dolor sit amet, vel accumsan</p>
            </div>
            <recommendations/>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-12">
            <div class="pb-2">
              <h6 class="font-weight-bold pb-1">Recommendations</h6>
              <p class="subtitle">Lorem ipsum dolor sit amet, vel accumsan</p>
            </div>
            <recommendations/>
          </div>
        </div>
      </div>
    </div>
  </span>
</template>
<script>
import Trends from "@/components/Trends/Trends";
import Recommendations from "@/components/Recommendations/Recommendations.vue";
import emojiData from '../../../data/emoji.js';

export default {
  name: "SinglePostPage",
  components: { Recommendations, Trends },
  props: {
    isConsumer: {
      type: Boolean,
      default: false
    },
  },
  data() {
    return {
      likePost: false,
      dislikePost: false,
      addBookmark: false,
      readStory: false,
      dropdownArrowDown: false,
      addComment: false,
      emojiData,
      textareaValue: '',
    };
  },
  computed: {
    getEmoji() {
      return this.emojiData;
    }
  },
  methods: {
    toggleLike() {
      this.likePost = !this.likePost;
      this.dislikePost = false;
    },
    toggleDislike() {
      this.dislikePost = !this.dislikePost;
      this.likePost = false;
    },
    toggleBookmark() {
      this.addBookmark = !this.addBookmark;
    },
    toggleReadStory() {
      this.readStory = !this.readStory;
    },
    positionDropdownArrow() {
      const dropdownEle = this.$refs.dropdown;
      this.dropdownArrowDown = false;

      const dropdownPositon = dropdownEle.getAttribute('x-placement');
      if (dropdownPositon === 'top-start') {
        this.dropdownArrowDown = true;
      }
    },
    removeStickyActions() {
      const Ele = this.$refs.postContent.getClientRects();

      const postContentFooter = document.getElementById("footer-action");

      if (Ele[0].bottom <= 0) {
        postContentFooter.setAttribute("style", 'position:absolute');
      } else {
        postContentFooter.setAttribute("style", 'position:fixed');
      }
    },
    toggleAddComment() {
      this.addComment = !this.addComment;
    },
    addEmoji(emoji) {
      const getEmoji = String.fromCodePoint(`0x${emoji}`);
      this.textareaValue += getEmoji;
    }
  },
  created() {
    window.onscroll = () => {
      this.removeStickyActions();
    }
  }
};
</script>

<style lang="scss" scoped>
@import "./SinglePostPage";
</style>
